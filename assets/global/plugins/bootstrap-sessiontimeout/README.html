<h1 id="bootstrap-session-timeout">bootstrap-session-timeout</h1>
<p>Inspired by <a href="https://github.com/maxfierke/jquery-sessionTimeout-bootstrap">jquery-sessionTimeout-bootstrap by maxfierke</a></p>
<p>There have been a number of major upgrades. For example, as long as the user is doing something on the page, he will never get a timeout. The original plugin launched a timeout warning dialog in a fixed amount of time regardless of user activity. See description and documentation for more information.</p>
<p>You can easily upgrade from jquery-sessionTimeout-bootstrap to bootstrap-session-timeout, since the basic options have been inherited from jquery-sessionTimeout-bootstrap and have not been renamed.</p>
<h2 id="description">Description</h2>
<p>After a set amount of idle time, a Bootstrap warning dialog is shown to the user with the option to either log out, or stay connected. If &quot;Logout&quot; button is selected, the page is redirected to a logout URL. If &quot;Stay Connected&quot; is selected the dialog closes and the session is kept alive. If no option is selected after another set amount of idle time, the page is automatically redirected to a set timeout URL.</p>
<p>Idle time is defined as no mouse, keyboard or touch event activity registered by the browser.</p>
<p>As long as the user is active, the (optional) keep-alive URL keeps getting pinged and the session stays alive. If you have no need to keep the server-side session alive via the keep-alive URL, you can also use this plugin as a simple lock mechanism that redirects to your lock-session or log-out URL after a set amount of idle time.</p>
<h2 id="getting-started">Getting Started</h2>
<ol>
<li>Download or git clone.</li>
<li>Run <code>bower install</code> to install dependencies or if you prefer to do it manually: include jQuery, Bootstrap JS and CSS (required if you want to use Bootstrap modal window).</li>
<li>Include <code>bootstrap-session-timeout.js</code> or the minified version <code>bootstrap-session-timeout.min.js</code></li>
<li>Call <code>$.sessionTimeout();</code> on document ready. See available options below or take a look at the examples.</li>
</ol>
<h2 id="documentation">Documentation</h2>
<h3 id="options">Options</h3>
<p><strong>title</strong><br></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;Your session is about to expire!&#39;</code></p>
<p>This is the text shown to user via Bootstrap warning dialog after warning period. (modal title)</p>
<p><strong>message</strong><br></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;Your session is about to expire.&#39;</code></p>
<p>This is the text shown to user via Bootstrap warning dialog after warning period.</p>
<p><strong>logoutButton</strong><br></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;Logout&#39;</code></p>
<p>This is the text shown to user via Bootstrap warning dialog after warning period in the logout button.</p>
<p><strong>keepAliveButton</strong><br></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;Stay Connected&#39;</code></p>
<p>This is the text shown to user via Bootstrap warning dialog after warning period in the Keep Alive button.</p>
<p><strong>keepAliveUrl</strong></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;/keep-alive&#39;</code></p>
<p>URL to ping via AJAX POST to keep the session alive. This resource should do something innocuous that would keep the session alive, which will depend on your server-side platform.</p>
<p><strong>keepAlive</strong></p>
<p>Type: <code>Boolean</code></p>
<p>Default: <code>true</code></p>
<p>If <code>true</code>, the plugin keeps pinging the <code>keepAliveUrl</code> for as long as the user is active. The time between two pings is set by the <code>keepAliveInterval</code> option. If you have no server-side session timeout to worry about, feel free to set this one to <code>false</code> to prevent unnecessary network activity.</p>
<p><strong>keepAliveInterval</strong></p>
<p>Type: <code>Integer</code></p>
<p>Default: <code>5000</code> (5 seconds)</p>
<p>Time in milliseconds between two keep-alive pings.</p>
<p><strong>ajaxType</strong></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;POST&#39;</code></p>
<p>If you need to specify the ajax method</p>
<p><strong>ajaxData</strong></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;&#39;</code></p>
<p>If you need to send some data via AJAX POST to your <code>keepAliveUrl</code>, you can use this option.</p>
<p><strong>redirUrl</strong></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;/timed-out&#39;</code></p>
<p>URL to take browser to if no action is take after the warning.</p>
<p><strong>logoutUrl</strong></p>
<p>Type: <code>String</code></p>
<p>Default: <code>&#39;/log-out&#39;</code></p>
<p>URL to take browser to if user clicks &quot;Logout&quot; on the Bootstrap warning dialog.</p>
<p><strong>warnAfter</strong></p>
<p>Type: <code>Integer</code></p>
<p>Default: <code>900000</code> (15 minutes)</p>
<p>Time in milliseconds after page is opened until warning dialog is opened.</p>
<p><strong>redirAfter</strong></p>
<p>Type: <code>Integer</code></p>
<p>Default: <code>1200000</code> (20 minutes)</p>
<p>Time in milliseconds after page is opened until browser is redirected to <code>redirUrl</code>.</p>
<p><strong>ignoreUserActivity</strong></p>
<p>Type: <code>Boolean</code></p>
<p>Default: <code>false</code></p>
<p>If <code>true</code>, this will launch the Bootstrap warning dialog / redirect (or callback functions) in a set amounts of time regardless of user activity. This in turn makes the plugin act much like the <a href="https://github.com/maxfierke/jquery-sessionTimeout-bootstrap">jquery-sessionTimeout-bootstrap by maxfierke</a> plugin.</p>
<p><strong>countdownSmart</strong></p>
<p>Type: <code>Boolean</code></p>
<p>Default: <code>false</code></p>
<p>If <code>true</code>, displays minutes as well as seconds in the countdown timer (e.g. &quot;3m 14s&quot;).
Displays only seconds when timer is under one minute (e.g. &quot;42s&quot;).</p>
<p><strong>countdownMessage</strong></p>
<p>Type: <code>String</code> or <code>Boolean</code></p>
<p>Default: <code>false</code></p>
<p>If you want a custom sentence to appear in the warning dialog with a timer showing the seconds remaining, use this option. Example: <code>countdownMessage: &#39;Redirecting in {timer}.&#39;</code> Place the <code>{timer}</code> string where you want the numeric countdown to appear. Another example: <code>countdownMessage: &#39;{timer} remaining.&#39;</code>. Can be combined with countdownBar option or used independently.</p>
<p><strong>countdownBar</strong></p>
<p>Type: <code>Boolean</code></p>
<p>Default: <code>false</code></p>
<p>If <code>true</code>, ads a countdown bar (uses Bootstrap progress bar) to the warning dialog. Can be combined with countdownMessage option or used independently.</p>
<p><strong>onStart</strong></p>
<p>Type: <code>Function</code> or <code>Boolean</code></p>
<p>Default: <code>false</code></p>
<p>Optional callback fired when first calling the plugin and every time user refreshes the session (on any mouse, keyboard or touch action). Takes options object as the only argument.</p>
<p><strong>onWarn</strong></p>
<p>Type: <code>Function</code> or <code>Boolean</code></p>
<p>Default: <code>false</code></p>
<p>Custom callback you can use instead of showing the Bootstrap warning dialog. Takes options object as the only argument.</p>
<p>Redirect action will still occur unless you also add the <code>onRedir</code> callback.</p>
<p><strong>onRedir</strong></p>
<p>Type: <code>Function</code> or <code>Boolean</code></p>
<p>Default: <code>false</code></p>
<p>Custom callback you can use instead of redirecting the user to <code>redirUrl</code>. Takes options object as the only argument.</p>
<h2 id="examples">Examples</h2>
<p>You can play around with the examples in the <code>/examples</code> directory.</p>
<p><strong>Basic Usage</strong></p>
<p>Shows the warning dialog after one minute. The dialog is visible for another minute. If user takes no action (interacts with the page in any way), browser is redirected to <code>redirUrl</code>. On any user action (mouse, keyboard or touch) the timeout timer is reset. Of course, you will still need to close the dialog.</p>
<pre><code class="lang-js">$.sessionTimeout({
    message: &#39;Your session will be locked in one minute.&#39;,
    keepAliveUrl: &#39;keep-alive.html&#39;,
    logoutUrl: &#39;login.html&#39;,
    redirUrl: &#39;locked.html&#39;,
    warnAfter: 60000,
    redirAfter: 120000
});
</code></pre>
<p><strong>With onWarn Callback</strong></p>
<p>Shows the &quot;Warning!&quot; alert after one minute. If user takes no action (interacts with the page in any way), after one more minute the browser is redirected to <code>redirUrl</code>. On any user action (mouse, keyboard or touch) the timeout timer is reset.</p>
<pre><code class="lang-js">$.sessionTimeout({
    redirUrl: &#39;locked.html&#39;,
    warnAfter: 60000,
    redirAfter: 120000,
    onWarn: function () {
        alert(&#39;Warning!&#39;);
    }
});
</code></pre>
<p><strong>With both onWarn and onRedir Callback</strong></p>
<p>Console logs the &quot;Your session will soon expire!&quot; text after one minute. If user takes no action (interacts with the page in any way), after two more minutes the &quot;Your session has expired!&quot; alert gets shown. No redirection occurs. On any user action (mouse, keyboard or touch) the timeout timer is reset.</p>
<pre><code class="lang-js">$.sessionTimeout({
    warnAfter: 60000,
    redirAfter: 180000,
    onWarn: function () {
        console.log(&#39;Your session will soon expire!&#39;);
    },
    onRedir: function () {
        alert(&#39;Your session has expired!&#39;);
    }
});
</code></pre>
<p><strong>With countdown message and bar displayed in warning dialog</strong></p>
<p>Same as basic usage except you&#39;ll also see the countdown message and countdown bar in the warning dialog. Uses Bootstrap progress bar. In countdownMessage place the <code>{timer}</code> string where you want the numeric countdown (seconds) to appear.</p>
<pre><code class="lang-js">$.sessionTimeout({
    keepAliveUrl: &#39;keep-alive.html&#39;,
    logoutUrl: &#39;login.html&#39;,
    redirUrl: &#39;locked.html&#39;,
    warnAfter: 60000,
    redirAfter: 120000,
    countdownMessage: &#39;Redirecting in {timer} seconds.&#39;,
    countdownBar: true
});
</code></pre>
<h2 id="contributing">Contributing</h2>
<p>In lieu of a formal styleguide, take care to maintain the existing coding style. Add comments for any new or changed functionality. Lint and test your code using <a href="http://gruntjs.com/">Grunt</a>.</p>
<h2 id="release-history">Release History</h2>
<ul>
<li><strong>1.0.3</strong> <code>2015-07-17</code><ul>
<li>Fixes various reported bugs</li>
</ul>
</li>
<li><strong>1.0.2</strong> <code>2015-02-10</code><ul>
<li>Added optional onStart callback.</li>
<li>All custom callbacks nowreceive options object as argument. </li>
<li>Added optional countdown message. Added optional countdown bar.</li>
</ul>
</li>
<li><strong>1.0.1</strong> <code>2014-01-23</code><ul>
<li>Added an option to send data to the keep-alive URL.</li>
</ul>
</li>
<li><strong>1.0.0</strong> <code>2014-01-22</code><ul>
<li>Initial release.</li>
</ul>
</li>
</ul>
<h2 id="license">License</h2>
<p>Copyright (c) 2014 <a href="http://www.orangehilldev.com">Orange Hill</a>. Licensed under the MIT license.</p>
